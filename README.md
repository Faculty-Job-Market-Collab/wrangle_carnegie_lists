---
editor_options: 
  markdown: 
    wrap: 72
---

# Wrangling institution lists

The code and data in this repo were used to convert lists 
of institutions into a database containing institution-specific data (e.g., 
location, doctoral degrees awarded). This README file contains a brief 
description of the purpose for each code file along the required and output files.

## `code/`

The `.R` files in this folder were used to process institutions provided as responses to job-market surveys. 

### `get_full_inst_list.R`

Run this code to separate the respondent-provided lists of institution
and generate a csv file of the provided institution names coded by
respondent id and institution type (e.g., PhD-program institution,
postdoc).

*Data Required:*

- `data/merged_data_19-22.csv` (CSV file with all three survey years combined.)

*Output:*

- `output/full_inst_list_2019-2021_date-generated.csv` (Separated respondent-provided institution names coded by respondent id and institution type)


### `get_wrangle_uni_functions.R`

Functions required for `wrangle_uni_names.R` to match respondent institutional names with official (e.g., Carnegie) lists. 

- `fix_inst_name()`: repairs abbreviated college and university names.

- `fix_inst_abbrv()`: expands common institutional acronyms.

- `fix_campus()`: appends campus information to main/primary institutional names.

- `replace_uny()`: repairs CUNY/SUNY institution names.


### `code/clean_carn_data.R`

Code to import 2018 Carnegie data file and generate cleaned institution names to match respondent-provided institution names against. Yields (and saves) a file of the 2018 Carnegie data with institution names prepped for a join.

*Data Required:*

- `data/CCIHE2018-PublicData.xlsx` (2018 Carnegie data file.)

*Output:*

- `output/cleaned_carnegie_data_date-generated.csv` (2018 Carnegie data with institution names cleaned for joins.)


### `wrangle_uni_names.R`

Code to clean and repair respondent-provided institution names then joins them with cleaned 2018 Carnegie data. Yields two, non-repetitive lists: 

1. Respondent-provided institutions that did not match those on the Carnegie list. 

2. Respondent-provided institutions with their matched institution from the Carnegie list.

*Code Required:*

- `code/get_wrangle_uni_functions.R` (Required functions to repair respondent-provided institution names.)

- `code/clean_carn_data.R` (Imports 2018 Carnegie data file and generates cleaned institution names to match respondent-provided institution names against.)

*Data Required:*

- `output/full_inst_list_2019-2022_date-generated.csv` (File of respondent institutions generated by `get_full_inst_list.R`.)

*Outputs:*

- `output/missing_inst_date-generated.csv` (List of respondent-provided institutions that did not match those on the Carnegie list.)

- `output/carnegie_inst_matches_date-generated.csv` (List of respondent-provided institutions and their matched institutions on the Carnegie list.)

- `output/cleaned_survey_inst_date-generated.csv` (Full list of respondent-provided institutions that has been repaired and prepped for joining with lists of official institution names (e.g., Carnegie).)

### `get_regions.R`

Imports list of US states, their abbreviations, and region in the US (e.g., Southeast, Noncontiguous, Southwest, Pacific, etc.). Contains code and functions to generate and identify regions in the US of respondent-provided institutions from the imported list. Also contains code for lists of countries by their world region (e.g., Africa, the Americas [minus the US and Canada], South-East Asia, Eastern Mediterranean, etc.) and a function that identifies world region based on country name.

- `get_us_region_list()`: generates state lists for each US region.

- `get_us_region()`: identifies the US region using the state name and/or abbreviations.

- `get_world_region()`: identifies the world region from country names.

*Data Required:*

- `data/us_region_list.csv` (List of US state names, abbreviations, and region.)


### `get_final_match_functions.R`

Functions required for `final_survey_inst_match.R` to match remaining respondent-provided institutional names with official names and data sets. 

- `fix_non_carn()`: repairs abbreviated institution names for those that are not on the Carnegie list.


### `final_survey_inst_match.R`

Code to generate the database containing institution-specific data (e.g., 
location, doctoral degrees awarded) for the respondent-provided lists 
of institutions. 

*Code Required:*

- `code/get_regions.R` (Code and functions to identify US and world regions.)

- `code/get_final_match_functions.R` (Functions to finish matching institution data with respondent-provided institutions.)

*Data Required:*

- `output/cleaned_carnegie_data_date-generated.csv` (2018 Carnegie data with institution names cleaned for joins. Generated by `code/clean_carn_data.R`.)

- `output/carnegie_inst_matches_date-generated.csv` (List of respondent-provided institutions and their matched institutions on the Carnegie list. Generated by `code/wrangle_uni_names.R`.)

- `output/cleaned_survey_inst_date-generated.csv` (Full list of respondent-provided institutions that has been repaired and prepped for joining with lists of official institution names (e.g., Carnegie). Generated by `code/wrangle_uni_names.R`.)

- `data/non-carnegie_unis.csv` (Data set of respondent-provided institutions that did not match those on the Carnegie list. Manually compiled using the list saved as `output/missing_inst_date-generated.csv` that was generated by `code/wrangle_uni_names.R`.)

*Output:*

- `output/final_survey_inst_data_2019-2022_date-generated.csv` (Final data set for analysis of the 2019-2022 job market survey results.)


## `code/herc_inst`

The `.R` files in this folder were used to process institutions provided in job-ad data provided by the Higher Education Research Consortium (HERC). 

### `parallelize_herc_final_dataset.R`

### `wrangle_herc_inst_names.R`

### `univ_list.R`







